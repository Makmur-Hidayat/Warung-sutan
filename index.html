

<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Warung Sutan</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f4f4f4;
    }
    .status-bar {
      text-align: center;
      font-weight: bold;
      padding: 10px;
      color: white;
      background: #dc3545;
      margin-bottom: 20px;
    }
    .container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .card {
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 125px;
    }
    select, textarea {
      width: 100%;
      margin: 8px 0;
      padding: 6px;
    }
    .qty-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .qty-controls button {
      background: #f7043f;
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      font-size: 18px;
      border-radius: 4px;
    }
    .cart {
      margin-top: 30px;
    }
    .cart-item {
      background: white;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 6px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    .btn-orange {
      background: #ff7043;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
    }
    .btn-orange:hover {
      background: #e05c35;
    }
    .notif {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #f7043f;
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
      z-index: 999;
    }
    .notif.show {
      opacity: 1;
    }
  </style>
</head>
<body>
<img src="https://i.ibb.co.com/xKN8r2pj/images.jpg" alt="Ikan" style="width:9cm; height:9cm; display:block; margin:auto;" />

  <div id="statusBar" class="status-bar">TUTUP</div>
  <div id="notif" class="notif"></div>

  <div class="container">
    <!-- Makanan -->
    <div class="card">
      <h3>Makanan</h3>
      <select id="foodSelect">
        <option value="">Pilih Menu</option>
        <option value="menu1-10000">Menu1 - 10.000</option>
        <option value="menu2-11000">Menu2 - 11.000</option>
      </select>
      <select id="foodExtra" multiple>
        <option value="T1-3000">T1 - 3.000</option>
        <option value="T2-4000">T2 - 4.000</option>
      </select>
      <select id="foodOption">
        <option value="">Pilih Opsi</option>
        <option value="Dingin">Dingin</option>
        <option value="Hangat">Hangat</option>
        <option value="Kecil">Kecil</option>
      </select>
      <div class="qty-controls">
        <button onclick="updateQty('food', -1)">-</button>
        <span id="foodQty">1</span>
        <button onclick="updateQty('food', 1)">+</button>
        <span>Subtotal: <span id="foodSubtotal">0</span></span>
      </div>
      <textarea id="foodNote" placeholder="Catatan (opsional)"></textarea>
      <button class="btn-orange" onclick="addToCart('food')">Masukkan Keranjang</button>
    </div>

    <!-- Minuman -->
    <div class="card">
      <h3>Minuman</h3>
      <select id="drinkSelect">
        <option value="">Pilih Menu</option>
        <option value="menuA-10000">MenuA - 10.000</option>
        <option value="menuB-11000">MenuB - 11.000</option>
      </select>
      <select id="drinkExtra" multiple>
        <option value="TA-3000">TA - 3.000</option>
        <option value="TB-4000">TB - 4.000</option>
      </select>
      <select id="drinkOption">
        <option value="">Pilih Opsi</option>
        <option value="Hangat">Hangat</option>
        <option value="Menengah">Menengah</option>
      </select>
      <div class="qty-controls">
        <button onclick="updateQty('drink', -1)">-</button>
        <span id="drinkQty">1</span>
        <button onclick="updateQty('drink', 1)">+</button>
        <span>Subtotal: <span id="drinkSubtotal">0</span></span>
      </div>
      <textarea id="drinkNote" placeholder="Catatan (opsional)"></textarea>
      <button class="btn-orange" onclick="addToCart('drink')">Masukkan Keranjang</button>
    </div>
  </div>

  <!-- Keranjang -->
  <div class="cart">
    <h3>Keranjang</h3>
    <div id="cartList"></div>
    <div>Total Pesanan: <span id="cartTotal">0</span></div>
    <select id="lokasiAntar" onchange="updateOngkir()">
      <option value="">Pilih Lokasi Antar</option>
      <option value="KM 9-6000">KM 9 - 6.000</option>
      <option value="KM 8-6000">KM 8 - 6.000</option>
    </select>
    <div>Total + Ongkir: <span id="totalPlusOngkir">0</span></div>
    <textarea id="alamatDetail" placeholder="Alamat lengkap: gang, rumah, gedung..."></textarea>
    <button class="btn-orange" onclick="checkout()">====KIRIM PESANAN KE WHATSAPP ADMINðŸ“¤====Pastikan Chatmu terkirim ke Admin yah</button>
  </div>

  <script>
    let cart = [];
    let ongkir = 0;
    const prices = {"T1": 3000, "T2": 4000, "TA": 3000, "TB": 4000};

    function showNotif(msg) {
      const el = document.getElementById("notif");
      el.textContent = msg;
      el.classList.add("show");
      setTimeout(() => el.classList.remove("show"), 3000);
    }

    function updateStatus() {
      const jam = new Date().getHours();
      const buka = (jam >= 12 && jam < 24);
      const statusEl = document.getElementById("statusBar");
      statusEl.textContent = buka ? "BUKA" : "TUTUP";
      statusEl.style.background = buka ? "green" : "#dc3545";

      const semuaTombol = document.querySelectorAll("button");
      semuaTombol.forEach(btn => {
        btn.disabled = !buka;
        btn.style.opacity = buka ? "1" : "0.5";
        btn.style.cursor = buka ? "pointer" : "not-allowed";
      });
    }

    function updateQty(type, delta) {
      const qtyEl = document.getElementById(`${type}Qty`);
      let qty = parseInt(qtyEl.textContent) + delta;
      qty = Math.max(1, qty);
      qtyEl.textContent = qty;
      updateSubtotal(type);
    }

    function updateSubtotal(type) {
      const select = document.getElementById(`${type}Select`).value;
      if (!select) return;
      const [_, price] = select.split("-");
      const qty = parseInt(document.getElementById(`${type}Qty`).textContent);
      const extras = Array.from(document.getElementById(`${type}Extra`).selectedOptions).map(opt => opt.value.split("-")[0]);
      let totalExtra = extras.reduce((sum, ex) => sum + (prices[ex] || 0), 0);
      const subtotal = (parseInt(price) + totalExtra) * qty;
      document.getElementById(`${type}Subtotal`).textContent = subtotal;
    }

    document.querySelectorAll("select").forEach(el => el.addEventListener("change", () => {
      if (el.id.includes("Select") || el.id.includes("Extra")) {
        const type = el.id.includes("food") ? "food" : "drink";
        updateSubtotal(type);
      }
    }));

    function addToCart(type) {
      const select = document.getElementById(`${type}Select`).value;
      const option = document.getElementById(`${type}Option`).value;
      const extras = Array.from(document.getElementById(`${type}Extra`).selectedOptions).map(opt => opt.value.split("-")[0]);
      if (!select) return showNotif("Pilih menu terlebih dahulu.");
      if (extras.length === 0) return showNotif("Pilih minimal satu extra.");
      if (!option) return showNotif("Pilih satu opsi.");

      const [name, price] = select.split("-");
      const qty = parseInt(document.getElementById(`${type}Qty`).textContent);
      const note = document.getElementById(`${type}Note`).value;
      const extraTotal = extras.reduce((sum, code) => sum + (prices[code] || 0), 0);
      const subtotal = (parseInt(price) + extraTotal) * qty;

      const exists = cart.some(item =>
        item.name === name && item.option === option &&
        item.extras.length === extras.length &&
        item.extras.every((v, i) => v === extras[i])
      );
      if (exists) return showNotif("Item sudah ada di keranjang.");

      cart.push({ name, qty, option, extras, note, subtotal });
      showNotif("Berhasil ditambahkan ke keranjang.");
      renderCart();
    }

    function renderCart() {
      const list = document.getElementById("cartList");
      list.innerHTML = "";
      let total = 0;
      cart.forEach((item, i) => {
        total += item.subtotal;
        list.innerHTML += `
          <div class="cart-item">
            ${item.name} (${item.qty}x) - ${item.subtotal}<br>
            Opsi: ${item.option}<br>
            Extra: ${item.extras.join(", ")}<br>
            Catatan: ${item.note}<br>
            <button onclick="removeCart(${i})">Hapus</button>
          </div>
        `;
      });
      document.getElementById("cartTotal").textContent = total;
      updateTotalOngkir();
    }

    function removeCart(i) {
      cart.splice(i, 1);
      renderCart();
    }

    function updateOngkir() {
      const val = document.getElementById("lokasiAntar").value;
      if (!val) return;
      const [_, biaya] = val.split("-");
      ongkir = parseInt(biaya);
      updateTotalOngkir();
    }

    function updateTotalOngkir() {
      const total = parseInt(document.getElementById("cartTotal").textContent);
      document.getElementById("totalPlusOngkir").textContent = total + ongkir;
    }

    function checkout() {
      const lokasi = document.getElementById("lokasiAntar").value;
      const alamat = document.getElementById("alamatDetail").value.trim();
      if (!cart.length) return showNotif("Keranjang kosong.");
      if (!lokasi) return showNotif("Pilih lokasi antar.");
      if (!alamat) return showNotif("Isi alamat.");

      const waktu = new Date().toLocaleString("id-ID");
      let msg = `*Halo Admin.... Tolong proses Pesananku di WARUNG SUTAN*%0A Waktu: ${waktu}%0A%0A`;

      cart.forEach((item, i) => {
        msg += `${i+1}. ${item.name}%0A`;
        msg += `Qty: ${item.qty}%0A`;
        if (item.option) msg += `Opsi: ${item.option}%0A`;
        if (item.extras.length) msg += `Extra: ${item.extras.join(", ")}%0A`;
        if (item.note) msg += `Catatan: ${item.note}%0A`;
        msg += `Subtotal: ${item.subtotal.toLocaleString("id-ID")}%0A%0A`;
      });

      msg += `-----------------------------%0A`;
      const total = parseInt(document.getElementById("cartTotal").textContent);
      const lokasiTxt = lokasi.split("-")[0];
      msg += `Total: ${total.toLocaleString("id-ID")}%0A`;
      msg += `Ongkir (${lokasiTxt}): ${ongkir.toLocaleString("id-ID")}%0A`;
      msg += `*Total Bayar: ${(total + ongkir).toLocaleString("id-ID")}*%0A%0A`;
      msg += `Alamat: ${alamat}`;

      const waLink = `https://wa.me/6285266610522?text=${msg}`;
      window.open(waLink, '_blank');
    }

    updateStatus();
    setInterval(updateStatus, 60000);
  </script>
</body>
</html>
